CREATE TABLE MEMBERS (
    MEMBER_ID VARCHAR2(50) NOT NULL PRIMARY KEY,
    MEMBER_PW VARCHAR2(100) NOT NULL,
    MEMBER_NICKNAME VARCHAR2(50) NOT NULL,
    MEMBER_EMAIL VARCHAR2(100) NOT NULL UNIQUE,
    CREATED_AT DATE DEFAULT SYSDATE,
    UPDATED_AT DATE
);

CREATE TABLE POST (
    POST_ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    MEMBER_ID VARCHAR2(50) NOT NULL,
    TITLE VARCHAR2(200) NOT NULL,
    CONTENTS CLOB,
    YOUTUBE_LINK VARCHAR2(500),
    EMOTION_CODE VARCHAR2(20),
    CREATED_AT DATE DEFAULT SYSDATE,
    UPDATED_AT DATE,
    VIEW_COUNT NUMBER DEFAULT 0,
    CONSTRAINT FK_POST_MEMBER FOREIGN KEY (MEMBER_ID)
        REFERENCES MEMBERS(MEMBER_ID)
);

CREATE TABLE COMMENTS (
    COMMENT_ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    POST_ID NUMBER NOT NULL,
    MEMBER_ID VARCHAR2(50) NOT NULL,
    CONTENT CLOB NOT NULL,
    CREATED_AT DATE DEFAULT SYSDATE,
    UPDATED_AT DATE,
    CONSTRAINT FK_COMMENT_POST FOREIGN KEY (POST_ID)
        REFERENCES POST(POST_ID),
    CONSTRAINT FK_COMMENT_MEMBER FOREIGN KEY (MEMBER_ID)
        REFERENCES MEMBERS(MEMBER_ID)
);

CREATE TABLE LIKES (
    LIKE_ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    POST_ID NUMBER NOT NULL,
    MEMBER_ID VARCHAR2(50) NOT NULL,
    CREATED_AT DATE DEFAULT SYSDATE,
    CONSTRAINT FK_LIKE_POST FOREIGN KEY (POST_ID)
        REFERENCES POST(POST_ID),
    CONSTRAINT FK_LIKE_MEMBER FOREIGN KEY (MEMBER_ID)
        REFERENCES MEMBERS(MEMBER_ID),
    CONSTRAINT UC_LIKE UNIQUE (POST_ID, MEMBER_ID)  -- 회원 1명당 게시글 1회 좋아요
);

CREATE TABLE EMOTION_CATEGORY (
    EMOTION_CODE VARCHAR2(20) PRIMARY KEY,
    EMOTION_NAME VARCHAR2(50),
    DESCRIPTION VARCHAR2(200),
    YOUTUBE_PLAYLIST_LINK VARCHAR2(500)
);


