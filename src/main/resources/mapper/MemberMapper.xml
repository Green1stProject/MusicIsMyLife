<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.musicismylife.domain.member.MemberMapper">
    <!-- 회원 추가 -->
    <insert id="insertMember">
      INSERT INTO members
			(   member_id ,    member_pw,      member_nickname,       member_email,   created_at ) 
		  VALUES 
		  ( #{ member_id }, #{ member_pw }, #{ member_nickname }, #{ member_email }, sysdate )   
    </insert>

    <!--  로그인 회원정보 -->
    <select id="login"
            resultType="com.musicismylife.domain.member.MemberDTO">
	    SELECT 
	      member_id, member_pw, member_nickname,
				member_email, created_at, updated_at
			FROM  members
			WHERE member_id = #{ member_id }
			AND   member_pw = #{ member_pw }
    </select>
    
    <!-- 회원 상세 조회 -->
    <select id="getMember" 
            resultType="com.musicismylife.domain.member.MemberDTO">
      SELECT 
        member_id, member_pw, member_nickname,
        member_email, created_at, updated_at
      FROM  members
      WHERE member_id = #{ member_id } 
    </select>
    
    <!--  회원 아이디 중복 체크 -->
    <select id="VariableId"
            resultType="com.musicismylife.domain.member.MemberDTO">
      SELECT member_id
      FROM  members
      WHERE member_id = #{ member_id }
    </select>
    
    <!--  회원 닉네임 중복 체크 -->
    <select id="VariableNickName"
            resultType="com.musicismylife.domain.member.MemberDTO">
      SELECT member_nickname
      FROM  members
      WHERE member_nickname = #{ member_nickname }
    </select>
    
    <!-- 회원정보 수정 -->
    <update id="updateMember">
	    UPDATE members
			SET 
			 	  member_pw = #{ member_pw }
				, member_nickname = #{ member_nickname }
				, member_email = #{ member_email }
				, updated_at = sysdate
	    WHERE member_id =  #{ member_id } 
    </update>

    <!-- 회원비밀번호 수정 -->
    <update id="updateKey">
	    UPDATE members
	    SET 
	        member_pw = #{ member_pw }
	      , updated_at = sysdate
	    WHERE member_id =  #{ member_id } 
    </update>
    
    <!-- 회원 삭제 -->
    <delete id="deleteMember" parameterType="int">
    
    </delete>
    
    <!-- 회원 목록 조회 -->
    <select id="getMemberList" resultType="com.musicismylife.domain.member.MemberDTO">
      
    </select>
</mapper>